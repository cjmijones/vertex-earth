[
  {
    "objectID": "security_data_handler.html",
    "href": "security_data_handler.html",
    "title": "Interactive Globe Story",
    "section": "",
    "text": "import pandas as pd\nimport numpy as np\nimport missingno as msno\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n\nsecurity_df = pd.read_csv(\"./datasets/security_incidents.csv\")\n\n\nsecurity_df.info()\nunique_actor_types = security_df['Actor type'].unique()\nunique_actor_names = security_df['Actor name'].unique()\n\nprint(\"Unique Actor Types:\", unique_actor_types)\nprint(\"Unique Actor Names:\", unique_actor_names)\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 4337 entries, 0 to 4336\nData columns (total 41 columns):\n #   Column                    Non-Null Count  Dtype  \n---  ------                    --------------  -----  \n 0   Incident ID               4337 non-null   int64  \n 1   Year                      4337 non-null   int64  \n 2   Month                     4289 non-null   float64\n 3   Day                       3957 non-null   float64\n 4   Country Code              4304 non-null   object \n 5   Country                   4332 non-null   object \n 6   Region                    3970 non-null   object \n 7   District                  3601 non-null   object \n 8   City                      3349 non-null   object \n 9   UN                        4337 non-null   int64  \n 10  INGO                      4337 non-null   int64  \n 11  ICRC                      4328 non-null   float64\n 12  NRCS and IFRC             4328 non-null   float64\n 13  NNGO                      4328 non-null   float64\n 14  Other                     4337 non-null   int64  \n 15  Nationals killed          4337 non-null   int64  \n 16  Nationals wounded         4337 non-null   int64  \n 17  Nationals kidnapped       4337 non-null   int64  \n 18  Total nationals           4337 non-null   int64  \n 19  Internationals killed     4337 non-null   int64  \n 20  Internationals wounded    4337 non-null   int64  \n 21  Internationals kidnapped  4337 non-null   int64  \n 22  Total internationals      4337 non-null   int64  \n 23  Total killed              4337 non-null   int64  \n 24  Total wounded             4337 non-null   int64  \n 25  Total kidnapped           4337 non-null   int64  \n 26  Total affected            4337 non-null   int64  \n 27  Gender Male               4337 non-null   int64  \n 28  Gender Female             4337 non-null   int64  \n 29  Gender Unknown            4337 non-null   int64  \n 30  Means of attack           4337 non-null   object \n 31  Attack context            4337 non-null   object \n 32  Location                  4337 non-null   object \n 33  Latitude                  4324 non-null   float64\n 34  Longitude                 4324 non-null   float64\n 35  Motive                    4333 non-null   object \n 36  Actor type                4337 non-null   object \n 37  Actor name                4329 non-null   object \n 38  Details                   4337 non-null   object \n 39  Verified                  4336 non-null   object \n 40  Source                    4337 non-null   object \ndtypes: float64(7), int64(20), object(14)\nmemory usage: 1.4+ MB\nUnique Actor Types: ['Unknown' 'Non-state armed group: Regional'\n 'Non-state armed group: National' 'Non-state armed group: Unknown'\n 'Staff member' 'Non-state armed group: Subnational' 'Unaffiliated'\n 'State: unknown' 'Police or paramilitary' 'Host state' 'Aid recipient'\n 'Non-state armed group: Global' 'Criminal' 'Foreign or coalition forces'\n 'Host State' 'Non-state armed group: Global ']\nUnique Actor Names: ['Unknown' 'Al-Itihaad al-Islamiya'\n 'Alliance of Democratic Forces for the Liberation of Congo-Zaire (ADFL)'\n 'Not applicable' 'Security guard' 'Clan'\n 'Armed Forces Revolutionary Council (AFRC)'\n 'Uganda National Rescue Front' 'Taliban' 'Armed tribesmen' 'Interahamwe'\n 'Militia' 'National Union for the Total Independence of Angola'\n 'Osman Atto Militia' 'Mobile Brigade Corps (Brimod)'\n 'Indonesian National Police' 'Sudan Liberation Movement/Army (SLA/AW)'\n 'Provincial Organization of Volunteers of Civil Defence of Angola (OPVDCA)'\n 'Mai Mai Militia' 'Muse Sudi & Omar Finish militia groups'\n \"Lord's Resistance Army (LRA)\" 'Al-Qaeda'\n \"Sudan People's Liberation Army (SPLA)\" 'Israel Defense Forces (IDF)'\n 'Ninja militia'\n 'Liberians United for Reconciliation and Democracy (LURD)'\n 'Al-Ittihad al-Islami' 'Contractor' 'Congolese National Police'\n 'Jaysh al-Mahdi' 'Janjaweed' 'Maoist rebel group (name unknown)'\n 'Indonesian National Armed Forces' 'Youths'\n 'Revolutionary Armed Forces of Colombia'\n 'Armed Forces of the Democratic Republic of the Congo (FARDC)'\n 'National Liberation Army' 'Shilluk King police' 'Murle & Didinga'\n 'Sudan National Security Service' 'Lashkar-e-Qahhar (suspected)'\n 'Sudanese Armed Forces' 'Special Task Force' 'Sri Lanka Armed Forces'\n 'Liberation Tigers of Tamil Eelam' 'Security Forces' 'Pirates'\n 'Transitional Federal Government forces (TFG)' 'Haqqani Network'\n 'Local government actors' 'Al Shabaab'\n 'Alliance for the Re-liberation of Somalia (armed faction)'\n 'International Security Assistance Force (ISAF)' 'Chadian Armed Forces'\n 'National Congress for the Defence of the People' 'Bani Dhabian tribe'\n 'Abu Sayyaf' 'Balochistan Liberation United Front' 'Police'\n 'Falcons for the Liberation of Africa' 'Military Police'\n 'Ethiopian Defense Forces' 'Oromo clan' 'Mai Mai Yakutumba'\n 'Al-Qaeda (affiliated)' 'Ogaden National Liberation Front (ONLF)'\n 'Pashtun and Uzbek anti-government forces' 'Uknown' 'Afghan Armed Forces'\n 'Murle Tribesman' 'Boko Haram' 'Mayi-Mayi Cheka' 'Conseil des R'\n 'Nuer clan' 'Democratic Forces for the Liberation of Rwanda (FDLR)'\n 'Spouse' 'Afghan National Police (ANP)' 'Abide Marabou tribe'\n 'Ansar al-Sharia' 'Yemeni Armed Forces'\n 'Somaliland Rapid Response Unit (RRU)' 'Refugees' 'Islamic State (IS)'\n 'Al-Marakisha tribe' 'Somali Armed Forces'\n 'District Shadow Governor (DSG)' 'International Military Forces (IMF)'\n 'Al-Nusra Front' 'National Security Personnel' 'Shareea Court' 'Seleka'\n 'Community members' 'Moro National Liberation Front (MNLF)'\n 'Tehrik-i-Taliban Pakistan (TTP)' 'Ex-Seleka' nan 'Afghan Local Police'\n 'Internally Displaced People (IDPs)'\n 'The Movement for Oneness and Jihad in West Africa (MUJAO)' 'Anti-Balaka'\n 'Mabanese Defense Forces' \"Donetsk People's Republic\"\n 'Pro-SPLA Shiluk militia' 'Dir Clan' 'Syrian Armed Forces'\n 'Kokang rebels' 'Al-Murabitoun' 'Russian Syrian Military Coalition'\n 'Family member' 'United States Armed Forces' 'Ex-employee'\n 'Ansar al-Islam' \"Sudan People's Liberation Army-in-Opposition (SPLA-IO)\"\n 'South Sudan Defence Forces (SSDF)' 'Saudi-led Coalition (SLC)'\n 'Houti Forces' 'Nigerian Armed Forces' 'Airport security'\n 'Kachin Independence Army (KIA)'\n 'Popular Front for the Central African Renaissance'\n 'Mouvement Patriotique pour la Centrafrique / Front Populaire pour la Renaissance de Centrafrique (MPC/FPRC)'\n 'Front Populaire pour la Renaissance de Centrafrique (FPRC)'\n 'Administration Police (AP)' 'Misseriya'\n 'South Sudan National Police Service' 'Hayat Tahrir al-Sham (HTS)'\n 'Military' 'Group to Support Islam and Muslims (GSIM)' 'MS-13'\n 'Tuareg tribe' 'Union for Peace in the Central African Republic (UPC)'\n 'Bandits '\n 'The Popular Front for the Rebirth of Central African Republic (FPRC)'\n 'Ebola victim families ' 'Day labourer' 'DR Congo Armed Forces'\n 'Security guards' 'Anti-Balaka ' 'Afghan National Security Forces'\n 'Islamic State in West Africa (ISWA)' 'Myanmar Armed Forces'\n 'Spouse/National Security Services (NSS)' 'Northern Alliance'\n 'Ethiopian Armed Forces' 'Fulani' 'SPLA/M-IO' 'Turkish Armed Forces'\n 'The Islamic Emirate of Afghanistan'\n 'Unite pour la paix en Centrafrique (UPC)' 'National Salvation Front'\n 'Turkish Armed Forces and Free Syrian Army'\n 'National Council of Abs District Officer' 'Isreali Defence Forces (IDF)'\n 'You le Geant' 'Civilians' 'Toronto Boys' 'Unknown '\n 'Guardians of Religion Organisation' 'Armed Opposition'\n 'Karamojong Militia' 'Malian Armed Forces (FAMA)'\n \"Kurdistan Workers' Party (PKK)\" 'Fulanis tribe'\n 'Islamic State of West Africa Province' 'JNIM Militia'\n 'Amazonia seperatists' 'Arab Tribesmen' 'Islamic State'\n 'Dan Na Ambassagou Militia' 'US Coalition' 'Tribes'\n 'Mayi-Mayi Biloze Bishambuke' 'Syrian Democratic Forces (SDF)'\n 'Taxi driver'\n \"Sudan People's Liberation Army-in-Opposition (SPLA-IO) affiliated youth\"\n 'Tribesmen' 'Marehan-Wagardhac militia'\n 'Coalition des Patriotes pour le  Changement/Mouvement Patriotique pour la Centrafrique (CPC/MPC)'\n 'Joint Force' 'Criminal' 'Cameroon Armed Forces' 'Civilian'\n 'Twigwaneho Militia' 'Mai Mai Buhirwa Militia' 'Malual Mouk Clan'\n 'Monyumiji Youth' \"People's Defense Force (PDF)\"\n 'Ambazonian Defense Forces (ADF)' 'Central African Armed Forces (FACA)'\n 'Herders' \"People's Militia Force\" 'Kurdish Self-management forces'\n 'Pyu Saw Htee militia' 'Retour, Reclamation et Rehabilitation (3R)'\n 'Junta Forces' '400 Mawozo' 'Hawadle Clan militia' 'Israeli Settlers'\n 'Dawlatoun' 'Labour Union' 'Unknwon' 'Russian Armed Forces'\n 'Commercial motorcyclists' 'Union Parishad' 'Islamic Republic of Iran'\n 'Beneficiary' 'Rizeigat Militia' 'Kuluna gang' 'Haitian National Police'\n 'Unite pour la Paix en Centrafique (UPC)' 'Youth' 'Unkown' 'Girlfriend'\n 'Prison services' 'Body guard of administrative authority'\n 'Kachin Independence Army' 'Kitgwang Militia' 'Al Fasher Militia'\n 'Allied Democratic Forces (ADF)' 'Rohingya extremists'\n 'Chieng Kuol and Chieng Yaar communities '\n \"Uganda People's Defence Force\" 'Tigray Peopleâ€™s Liberation Front (TPLF)'\n 'Saraya Ahl al-Khaf' 'Oromo Liberation Army (OLA)'\n 'Islamic State (affiliated)' 'Boko Karam'\n 'Islamic State in the Greater Sahara' 'Bandits'\n \"Sudan People's Liberation Movement-North\" 'Dinka Bor'\n 'Lango age-set group' 'Agaar Dinka community members'\n 'Husband of aid receipient' 'Rapid Support Forces (RSF)' 'CODECO'\n 'PMC Wagner' 'Sudan Rapid Support Forces (RSF)' 'Aid recipient' 'Workers'\n 'Community member' 'One Heart gang' 'Jund al-Sham' 'Dhulbahante clan'\n 'Dulmi-diid clan militia' \"Tariq Saleh's forces\"\n 'Local Agar Dinka members' 'Dawei Defense Team (PaKaPha)' 'Unaffiliated'\n 'March 23 Movement (M23)' 'Local resistance forces' 'Hamas' 'Luo youth'\n 'Israeli Defence Forces (IDF)' 'Spouse of a beneficiary'\n 'Rek Dinka and the Marial Bai/Wun Bai community' 'Ex-wife'\n 'UN national staff' 'Not aplicable' 'Zamfara Militia'\n 'Rapid Support Forces' 'IDP' 'Homeless person' 'Colleague' 'IDPs'\n 'Southern Transitional Council (STC)' 'QSD militia' 'Non applicable'\n 'Fellow staff member' 'Myanmar National Democratic Alliance Army (MNDAA)'\n 'Armed demonstrators' 'Protesters' 'Houthi Forces' 'Criminals' 'Wagner'\n 'Digil-Jiido clan militia' 'Burkina Faso Armed Forces' 'EIS affiliated'\n 'Israel Defense Forces' 'Sudan Joint Forces' 'Haitian Police']\n\n\n\n# Filter out rows missing lat or long\ninitial_rows = len(security_df)\nfiltered_df = security_df.dropna(subset=['Latitude', 'Longitude'])\nfiltered_df = filtered_df[filtered_df[\"Year\"] &lt; 2025]\nfiltered_rows = len(filtered_df)\n\n# Print metrics\nprint(f\"Initial rows: {initial_rows}\")\nprint(f\"Rows after filtering: {filtered_rows}\")\nprint(f\"Rows removed: {initial_rows - filtered_rows}\")\n\n# Generate and show missingness plot for the remaining data\nmsno.matrix(filtered_df)\nplt.title(\"Missing Data Matrix for Filtered Data\")\nplt.show()\n\nInitial rows: 4337\nRows after filtering: 4277\nRows removed: 60\n\n\n\n\n\n\n\n\n\n\n# simple_df = filtered_df.iloc[10:200] \n# simple_df\n# simple_df.to_csv('./datasets/simple.csv', index=False)\n\nfiltered_df.to_csv('./datasets/filtered_security_df.csv', index=False)\n\n\n# Basic structure and missing data inspection\nsummary = {\n    \"columns\": filtered_df.columns.tolist(),\n    \"missing_values\": filtered_df.isnull().sum(),\n    \"data_types\": filtered_df.dtypes,\n    \"sample\": filtered_df.sample(5, random_state=42)\n}\n\n# Yearly incident counts\nyearly_counts = filtered_df['Year'].value_counts().sort_index()\n\n# Total affected by year\naffected_by_year = filtered_df.groupby('Year')[[\n    'Total affected', 'Total killed', 'Total wounded', 'Total kidnapped'\n]].sum().reset_index()\n\n# Gender-based totals per year\ngender_by_year = filtered_df.groupby('Year')[[\n    'Gender Male', 'Gender Female', 'Gender Unknown'\n]].sum().reset_index()\n\n# Country-level incidents\ncountry_counts = filtered_df['Country'].value_counts().head(15)\n\n# Attack contexts\ncontext_counts = filtered_df['Attack context'].value_counts().head(10)\n\n# Actor types\nactor_counts = filtered_df['Actor type'].value_counts().head(10)\n\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\ndef explore_total_affected(csv_path):\n    df = pd.read_csv(csv_path)\n\n    # Convert column to numeric (just in case there are strings)\n    df['Total affected'] = pd.to_numeric(df['Total affected'], errors='coerce')\n\n    # Drop missing or NaN values\n    affected = df['Total affected'].dropna()\n\n    print(f\"Total incidents with data: {len(affected)}\")\n    print(f\"Min: {affected.min()}, Max: {affected.max()}\")\n    print(f\"Mean: {affected.mean():.2f}, Median: {affected.median():.2f}\")\n    print(f\"95th percentile: {affected.quantile(0.95)}\")\n\n    # Plot distribution\n    plt.figure(figsize=(10, 4))\n    plt.hist(affected, bins=50, color='orange', edgecolor='black')\n    plt.title(\"Distribution of Total Affected\")\n    plt.xlabel(\"People Affected\")\n    plt.ylabel(\"Incident Count\")\n    plt.grid(True)\n    plt.show()\n\n    return affected.describe()\n\nexplore_total_affected(\"./datasets/filtered_security_df.csv\")\n\nTotal incidents with data: 4324\nMin: 0, Max: 92\nMean: 1.89, Median: 1.00\n95th percentile: 5.0\n\n\n\n\n\n\n\n\n\ncount    4324.000000\nmean        1.886448\nstd         2.661801\nmin         0.000000\n25%         1.000000\n50%         1.000000\n75%         2.000000\nmax        92.000000\nName: Total affected, dtype: float64\n\n\n\nsns.set(style=\"whitegrid\")\n\n# 1. Incident count over time\nplt.figure(figsize=(10, 5))\nsns.lineplot(x=yearly_counts.index, y=yearly_counts.values, marker=\"o\")\nplt.title(\"Total Number of Security Incidents by Year\")\nplt.xlabel(\"Year\")\nplt.ylabel(\"Incident Count\")\nplt.xticks(rotation=45)\nplt.tight_layout()\nplt.show()\n\n# 2. Total affected, killed, wounded, kidnapped over time\nplt.figure(figsize=(12, 6))\nmelted_affected = affected_by_year.melt(id_vars=\"Year\", var_name=\"Impact Type\", value_name=\"Count\")\nsns.lineplot(data=melted_affected, x=\"Year\", y=\"Count\", hue=\"Impact Type\", marker=\"o\")\nplt.title(\"Yearly Impact: Affected, Killed, Wounded, Kidnapped\")\nplt.xlabel(\"Year\")\nplt.ylabel(\"Count\")\nplt.legend(title=\"Impact Type\")\nplt.tight_layout()\nplt.show()\n\n# 3. Gender breakdown over time\nplt.figure(figsize=(12, 6))\nmelted_gender = gender_by_year.melt(id_vars=\"Year\", var_name=\"Gender\", value_name=\"Count\")\nsns.lineplot(data=melted_gender, x=\"Year\", y=\"Count\", hue=\"Gender\", marker=\"o\")\nplt.title(\"Gender Breakdown of Victims Over Time\")\nplt.xlabel(\"Year\")\nplt.ylabel(\"Count\")\nplt.legend(title=\"Gender\")\nplt.tight_layout()\nplt.show()\n\n# 4. Top 15 countries by total incident count\nplt.figure(figsize=(10, 6))\nsns.barplot(y=country_counts.index, x=country_counts.values)\nplt.title(\"Top 15 Countries by Incident Count\")\nplt.xlabel(\"Incident Count\")\nplt.ylabel(\"Country\")\nplt.tight_layout()\nplt.show()\n\n# 5. Organization involvement over time\n# Sum all org columns by year\norg_columns = ['UN', 'INGO', 'ICRC', 'NRCS and IFRC', 'NNGO', 'Other']\norg_by_year = filtered_df.groupby('Year')[org_columns].sum().reset_index()\n\n# Melt for plotting\nmelted_orgs = org_by_year.melt(id_vars=\"Year\", var_name=\"Organization\", value_name=\"Incident Count\")\n\n# Plot\nplt.figure(figsize=(12, 6))\nsns.lineplot(data=melted_orgs, x=\"Year\", y=\"Incident Count\", hue=\"Organization\", marker=\"o\")\nplt.title(\"Incidents Involving Organizations Over Time\")\nplt.xlabel(\"Year\")\nplt.ylabel(\"Incident Count\")\nplt.legend(title=\"Organization\")\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# 1. Create a pivot table: Actor Type vs. Organization\nactor_org_matrix = pd.DataFrame(0, index=filtered_df[\"Actor type\"].unique(), columns=org_columns)\n\n# Fill in co-occurrence counts\nfor org in org_columns:\n    sub_df = filtered_df[filtered_df[org] &gt; 0]\n    counts = sub_df[\"Actor type\"].value_counts()\n    actor_org_matrix.loc[counts.index, org] = counts.values\n\n# Clean and remove low frequency actor types\nactor_org_matrix = actor_org_matrix.loc[actor_org_matrix.sum(axis=1) &gt; 5]\n\n# 2. Create an Org vs. Impact matrix (sum values per org)\n# Melt organizations first\norg_melted = filtered_df.melt(id_vars=[\n    'Total killed', 'Total wounded', 'Total kidnapped', 'Total affected'\n], value_vars=org_columns, var_name=\"Organization\", value_name=\"Present\")\n\n# Filter only rows where org was involved\norg_melted = org_melted[org_melted[\"Present\"] &gt; 0]\n\n# Group and sum impact columns by organization\nimpact_matrix = org_melted.groupby(\"Organization\")[[\n    'Total killed', 'Total wounded', 'Total kidnapped', 'Total affected'\n]].sum()\n\n# Plot heatmap: Actor type vs. Organization\nplt.figure(figsize=(10, 8))\nsns.heatmap(actor_org_matrix, cmap=\"Blues\", linewidths=0.5, annot=True, fmt=\"d\")\nplt.title(\"Heatmap: Actor Type Targeting of Organizations\")\nplt.xlabel(\"Organization\")\nplt.ylabel(\"Actor Type\")\nplt.tight_layout()\nplt.show()\n\n# Plot heatmap: Organization vs. Impact\nplt.figure(figsize=(8, 6))\nsns.heatmap(impact_matrix, cmap=\"Reds\", linewidths=0.5, annot=True, fmt=\"d\")\nplt.title(\"Heatmap: Impact by Organization (Killed, Wounded, Kidnapped, Affected)\")\nplt.xlabel(\"Impact Type\")\nplt.ylabel(\"Organization\")\nplt.tight_layout()\nplt.show()"
  }
]